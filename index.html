<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mortgage Comparison Calculator</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="container">
    <header>
      <h1>Mortgage Comparison Calculator</h1>
      <p>Compare two loan options with amortization schedules and custom prepayment scenarios.</p>
    </header>

    <section class="grid two-columns">
      <article class="card" id="loan-1">
        <h2>Mortgage A</h2>
        <label>Loan Amount ($)
          <input type="number" id="loanAmount1" value="290000" min="0" step="1000" />
        </label>
        <label>Interest Rate (%)
          <input type="number" id="rate1" value="6.88" min="0" step="0.01" />
        </label>
        <label>Term (Years)
          <input type="number" id="years1" value="30" min="1" step="1" />
        </label>

        <h3>Prepayment for Mortgage A</h3>
        <div class="grid three-columns">
          <label>Extra Monthly ($)
            <input type="number" id="extraMonthly1" value="0" min="0" step="10" />
          </label>
          <label>Annual Lump-Sum ($)
            <input type="number" id="extraAnnual1" value="0" min="0" step="100" />
          </label>
          <label>One-Time Payment ($)
            <input type="number" id="extraOneTime1" value="0" min="0" step="100" />
          </label>
        </div>
        <label>One-Time Payment Month
          <input type="number" id="oneTimeMonth1" value="12" min="1" step="1" />
        </label>
      </article>

      <article class="card" id="loan-2">
        <h2>Mortgage B</h2>
        <label>Loan Amount ($)
          <input type="number" id="loanAmount2" value="290000" min="0" step="1000" />
        </label>
        <label>Interest Rate (%)
          <input type="number" id="rate2" value="5.88" min="0" step="0.01" />
        </label>
        <label>Term (Years)
          <input type="number" id="years2" value="20" min="1" step="1" />
        </label>

        <h3>Prepayment for Mortgage B</h3>
        <div class="grid three-columns">
          <label>Extra Monthly ($)
            <input type="number" id="extraMonthly2" value="0" min="0" step="10" />
          </label>
          <label>Annual Lump-Sum ($)
            <input type="number" id="extraAnnual2" value="0" min="0" step="100" />
          </label>
          <label>One-Time Payment ($)
            <input type="number" id="extraOneTime2" value="0" min="0" step="100" />
          </label>
        </div>
        <label>One-Time Payment Month
          <input type="number" id="oneTimeMonth2" value="12" min="1" step="1" />
        </label>
      </article>
    </section>

    <section class="card actions-card">
      <p class="validation-help">Invalid fields are highlighted. Correct values to continue.</p>
      <div class="actions">
        <button id="calculateBtn">Calculate Comparison</button>
        <button id="resetBtn" class="ghost">Reset to Defaults</button>
      </div>
      <p id="formError" class="form-error" role="alert" aria-live="polite"></p>
    </section>

    <section class="grid two-columns">
      <article class="card results">
        <h2>Mortgage A Results</h2>
        <ul id="summary1" class="summary-list"></ul>
      </article>
      <article class="card results">
        <h2>Mortgage B Results</h2>
        <ul id="summary2" class="summary-list"></ul>
      </article>
    </section>

    <section class="card">
      <h2>Visual Comparison: Remaining Balance Over Time</h2>
      <canvas id="balanceChart" width="1000" height="380" aria-label="Balance comparison chart"></canvas>
      <p id="chartTooltip" class="chart-tooltip" hidden></p>
      <p class="legend"><span class="dot blue"></span> Mortgage A &nbsp; <span class="dot green"></span> Mortgage B</p>
      <p id="comparisonBlurb"></p>
    </section>

    <section class="grid two-columns">
      <article class="card">
        <h2>Amortization Schedule A</h2>
        <button id="exportCsv1" class="ghost small">Export A to CSV</button>
        <div class="table-wrap">
          <table id="table1">
            <thead>
              <tr>
                <th>Month</th>
                <th>Payment</th>
                <th>Principal</th>
                <th>Interest</th>
                <th>Extra</th>
                <th>Balance</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </article>
      <article class="card">
        <h2>Amortization Schedule B</h2>
        <button id="exportCsv2" class="ghost small">Export B to CSV</button>
        <div class="table-wrap">
          <table id="table2">
            <thead>
              <tr>
                <th>Month</th>
                <th>Payment</th>
                <th>Principal</th>
                <th>Interest</th>
                <th>Extra</th>
                <th>Balance</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </article>
    </section>
  </main>

  <script type="module" src="app.js"></script>
</body>
</html>
